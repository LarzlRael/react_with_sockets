(this["webpackJsonpmaps-app"]=this["webpackJsonpmaps-app"]||[]).push([[0],{48:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(42),a=n.n(r),o=(n(48),n(14)),u=n(43),s=n.n(u),i=n(1),f=Object(c.createContext)(),l=function(e){var t=e.children,n=function(e){var t=Object(c.useMemo)((function(){return s.a.connect(e,{transports:["websocket"]})}),[e]),n=Object(c.useState)(!1),r=Object(o.a)(n,2),a=r[0],u=r[1];return Object(c.useEffect)((function(){u(t.connected)}),[t]),Object(c.useEffect)((function(){t.on("connect",(function(){return u(!0)}))}),[t]),Object(c.useEffect)((function(){t.on("disconnect",(function(){return u(!1)}))}),[t]),{socket:t,online:a}}("https://react-maps-sockets.herokuapp.com/"),r=n.socket,a=n.online;return Object(i.jsx)(f.Provider,{value:{socket:r,online:a},children:t})},b=n(11),d=n.n(b),j=n(86),m=n(85);d.a.workerClass=n(81).default,d.a.accessToken="pk.eyJ1IjoibGFyemRvc2FuIiwiYSI6ImNrbWRoOHUyOTBocjIybm52eWwwNThhbWIifQ.SwHC2b7Ven-LYAVmup766A";var O={lng:-122.4725,lat:37.801,zoom:10},v=function(){var e=Object(c.useContext)(f).socket,t=function(e){var t=Object(c.useRef)(),n=Object(c.useCallback)((function(e){t.current=e}),[]),r=Object(c.useRef)({}),a=Object(c.useRef)(new m.a),u=Object(c.useRef)(new m.a),s=Object(c.useRef)(),i=Object(c.useState)(e),f=Object(o.a)(i,2),l=f[0],b=f[1],O=Object(c.useCallback)((function(e,t){var n=e.lngLat||e,c=n.lng,o=n.lat,i=new d.a.Marker;i.id=null!==t&&void 0!==t?t:Object(j.a)(),i.setLngLat([c,o]).addTo(s.current).setDraggable(!0),r.current[i.id]=i,t||u.current.next({id:i.id,lng:c,lat:o}),i.on("drag",(function(e){var t=e.target,n=t.id,c=t.getLngLat(),r=c.lng,o=c.lat;a.current.next({id:n,lng:r,lat:o})}))}),[]),v=Object(c.useCallback)((function(e){var t=e.id,n=e.lng,c=e.lat;r.current[t].setLngLat([n,c])}),[]);return Object(c.useEffect)((function(){var n=new d.a.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v11",center:[e.lng,e.lat],zoom:e.zoom});s.current=n}),[e]),Object(c.useEffect)((function(){var e;null===(e=s.current)||void 0===e||e.on("move",(function(){var e=s.current.getCenter(),t=e.lng,n=e.lat;b({lng:t.toFixed(4),lat:n.toFixed(4),zoom:s.current.getZoom()})}))}),[]),Object(c.useEffect)((function(){var e;null===(e=s.current)||void 0===e||e.on("click",O)}),[O]),{coords:l,marcadores:r,nuevoMarcador$:u.current,movimientoMarcador$:a.current,setRef:n,agregarMarcador:O,actualizarMarcador:v}}(O),n=t.setRef,r=t.coords,a=t.nuevoMarcador$,u=t.movimientoMarcador$,s=t.agregarMarcador,l=t.actualizarMarcador;return Object(c.useEffect)((function(){e.on("marcadores-activos",(function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var c=n[t];s(e[c],c)}}))}),[e,s]),Object(c.useEffect)((function(){a.subscribe((function(t){e.emit("marcador-nuevo",t)}))}),[a,e]),Object(c.useEffect)((function(){u.subscribe((function(t){e.emit("marcador-actualizado",t)}))}),[e,u]),Object(c.useEffect)((function(){e.on("marcador-nuevo",(function(e){s(e,e.id)}))}),[e,s]),Object(c.useEffect)((function(){e.on("marcador-actualizado",(function(e){l(e)}))}),[e,l]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"info",children:["Lng:",r.lng," | Lat:",r.lat," | zoom:",r.zoom]}),Object(i.jsx)("div",{ref:n,className:"mapContainer"})]})},g=function(){return Object(i.jsx)(l,{children:Object(i.jsx)(v,{})})};a.a.render(Object(i.jsx)(g,{}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.cfef5451.chunk.js.map